---
import MainLayout from "../layouts/MainLayout.astro";
import Hero from "../components/Hero.astro";
import RundeCard from "../components/RundeCard.astro";
import FirkantCard from "../components/FirkantCard.astro";
import BaggrundSky from '../assets/images/baggrundsblaasky.png?url';
import BlaaPopkorn from '../assets/images/blaapopkorn.png?url';
import RodBaggrundSky from '../assets/images/rodbaggrundssky.png?url';
import RodPopkorn from '../assets/images/rodpopkornmand.png?url';
import LillaBaggrundSky from '../assets/images/lillabaggrundssky.png?url';
import LillaPopkorn from '../assets/images/lillapopkorn.png?url';
import Vitello from '../assets/images/vitello.png?url';
import Pip from '../assets/images/pip.png?url';
import Lillefinger from '../assets/images/lillefinger.png?url';
import VitelloCard from '../assets/images/vitellocard.png?url';
import PipCard from '../assets/images/pipungernecard.png?url';
import LillefingerCard from '../assets/images/lillefingercard.png?url';
import CirckelineFirkant from '../assets/images/cirkelinefirkant.png?url';
import Cirkeline2Firkant from '../assets/images/cirkeline2firkant.png?url';
import VitelloFirkant from '../assets/images/vitellofirkant.png?url';
import JulemandenFirkant from '../assets/images/julemandenfirkant.png?url';
import SnemandfFirkant from '../assets/images/snemandfirkant.png?url';
import PrikFirkant from '../assets/images/prikfirkant.png?url';

const cards = [
	{ title: 'Vitello', img: Vitello, bg: VitelloCard },
	{ title: 'Pipungerne', img: Pip, bg: PipCard },
	{ title: 'Lillefinger', img: Lillefinger, bg: LillefingerCard }
];
// create 12 placeholders by repeating the `cards` array
const placeholders = Array.from({ length: 12 }, (_, i) => cards[i % cards.length]);

const firkantCards = [
	{ title: 'CIRKELINE: HØJT FRA TRÆETS GRØNNE', duration: '14 MIN', img: CirckelineFirkant },
	{ title: 'VITELLO KØBER EN JULEGAVE', duration: '5 MIN', img: VitelloFirkant },
	{ title: 'JAGTEN PÅ JULEMANDEN', duration: '27 MIN', img: JulemandenFirkant },
	{ title: 'CIRKELINE: KLODSMUS:', duration: '13 MIN', img: Cirkeline2Firkant },
	{ title: 'PRIK OG PLET OG DEN MAGISKE', duration: '7 MIN', img: PrikFirkant },
	{ title: 'SNEMANDEN', duration: '25 MIN', img: SnemandfFirkant }
];
const firkantPlaceholders = Array.from({ length: 12 }, (_, i) => firkantCards[i % firkantCards.length]);
---
<MainLayout title="Børnebiffen - Forside" description="Velkommen til Børnebiffen - din destination for børnevenlige filmoplevelser!">
	<Hero />
	<div class="section-wrapper" style={`background-image: url(${BaggrundSky})`}>
		<section class="section" style="background-color: var(--color-blaa)">
			<h2 class="section-title" style="color: var(--color-blaa)">SE DINE YNDLINGSKARAKTERER</h2>
			<div class="grid">
				<div class="popcorn-cell">
					<img src={BlaaPopkorn} alt="Blå popcorn" class="popcorn-img" />
				</div>
				<div class="carousel-cell">
					<div class="carousel">
						{placeholders.map((card) => (
							<div class="carousel-item">
								<RundeCard title={card.title} img={card.img} bg={card.bg} />
							</div>
						))}
					</div>
				</div>
			</div>
		</section>
	</div>

	<div class="section-wrapper" style={`background-image: url(${RodBaggrundSky}); background-position: right center`}>
		<section class="section" style="background-color: #E8A5B8">
			<h2 class="section-title" style="color: #E8A5B8">JUL</h2>
			<div class="grid">
				<div class="popcorn-cell">
					<img src={RodPopkorn} alt="Rød popcorn" class="popcorn-img" />
				</div>
				<div class="carousel-cell">
					<div class="carousel">
						{firkantPlaceholders.map((card) => (
							<div class="carousel-item">
								<FirkantCard title={card.title} duration={card.duration} img={card.img} />
							</div>
						))}
					</div>
				</div>
			</div>
		</section>
	</div>

	<div class="section-wrapper" style={`background-image: url(${LillaBaggrundSky}); background-position: center`}>
		<section class="section" style="background-color: #C4B5D8">
			<h2 class="section-title" style="color: #C4B5D8">EVENTYR</h2>
			<div class="grid">
				<div class="popcorn-cell">
					<img src={LillaPopkorn} alt="Lilla popcorn" class="popcorn-img" />
				</div>
				<div class="carousel-cell">
					<div class="carousel">
						{firkantPlaceholders.map((card) => (
							<div class="carousel-item">
								<FirkantCard title={card.title} duration={card.duration} img={card.img} color="#6B4A7E" />
							</div>
						))}
					</div>
				</div>
			</div>
		</section>
	</div>

<style>
	.section-wrapper {
		background-position: start end;
		background-repeat: no-repeat;
		background-size: contain;
		width: 100%;
		padding: 4rem 0;
		margin-bottom: 3rem;
		overflow: visible;
	}
	@media (min-width:768px) { .section-wrapper { padding: 6rem 0; margin-bottom: 4rem; } }
	@media (min-width:1024px) { .section-wrapper { padding: 8rem 0; margin-bottom: 5rem; } }

	.section { 
		position: relative;
		overflow: visible;
		padding: 2rem 0;
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
	}

	.section-title {
		letter-spacing: 2px;
		position: absolute;
		left: 1.5rem;
		top: -1.7rem;
		z-index: 40;
		white-space: nowrap;
		max-width: calc(100vw - 2rem);
		margin: 0;
	}
	@media (min-width:768px) { .section-title { left: 3rem; } }
	@media (min-width:1024px) { .section-title { top: -3.6rem; } }

	.grid {
		display: grid;
		grid-template-columns: repeat(12, 1fr);
		align-items: center;
		width: 100vw;
	}

	.popcorn-cell {
		grid-column: 1 / 3;
		display: flex;
		align-items: center;
		position: relative;
		z-index: 10;
	}

	.popcorn-img {
		width: 100%;
		height: auto;
		min-width: 180px;
		max-width: 350px;
	}
	@media (min-width:768px) { .popcorn-img { min-width: 220px; } }
	@media (min-width:1024px) { .popcorn-img { min-width: 280px; } }

	.carousel-cell {
		grid-column: 3 / 13;
		position: relative;
	}

	.carousel {
		display: flex;
		gap: 2rem;
		overflow-x: auto;
		scroll-snap-type: x mandatory;
		scroll-behavior: smooth;
		-webkit-overflow-scrolling: touch;
		scrollbar-width: none;
		-ms-overflow-style: none;
		padding: 1rem 2rem 1rem 1rem;
	}

	.carousel::-webkit-scrollbar { display: none; }

	.carousel-item {
		flex: 0 0 auto;
		scroll-snap-align: center;
	}
</style>

</MainLayout>