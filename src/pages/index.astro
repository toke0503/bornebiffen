---
import MainLayout from "../layouts/MainLayout.astro";
import Link from "../components/Link.astro";
import { Image } from "astro:assets";
import Heading from "../components/Heading.astro";
import Text from "../components/Text.astro";
import Button from "../components/Button.astro";
import Hero from "../components/Hero.astro";
import RundeCard from "../components/RundeCard.astro";
import BaggrundSky from '../assets/images/baggrundsblaasky.png?url';
import BlaaPopkorn from '../assets/images/blaapopkorn.png?url';
import Vitello from '../assets/images/vitello.png?url';
import Pip from '../assets/images/pip.png?url';
import Lillefinger from '../assets/images/lillefinger.png?url';
import Raeven from '../assets/images/raeven.png?url';
import VitelloCard from '../assets/images/vitellocard.png?url';
import PipCard from '../assets/images/pipungernecard.png?url';
import LillefingerCard from '../assets/images/lillefingercard.png?url';

const cards = [
	{ title: 'Vitello', img: Vitello, bg: VitelloCard },
	{ title: 'Pipungerne', img: Pip, bg: PipCard },
	{ title: 'Lillefinger', img: Lillefinger, bg: LillefingerCard }
];
// create 12 placeholders by repeating the `cards` array
const placeholders = Array.from({ length: 12 }, (_, i) => cards[i % cards.length]);
---
<MainLayout title="Titel">
	<Hero />
	<div class="rundecards-wrapper" style={`background-image: url(${BaggrundSky})`}>
		<section class="rundecards-section relative w-full bg-blaa mt-25 md:mt-50 lg:mt-50">
				<h2 class="rundecards-title font-heading">SE DINE YNDLINGSKARAKTERER</h2>

			<!-- 12-column grid container (full viewport width) -->
			<div class="cards-grid">
				<!-- Popcorn: columns 1-2 -->
				<div class="popcorn-cell">
					<img src={BlaaPopkorn} alt="BlÃ¥ popcorn" class="popcorn-img" />
				</div>

				<!-- Carousel: columns 3-12 -->
				<div class="carousel-cell">
					<div class="carousel-wrapper">
						<div class="carousel">
							{placeholders.map((card) => (
								<div class="carousel-item">
									<RundeCard title={card.title} img={card.img} bg={card.bg} />
								</div>
							))}
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	</div>

		<style>
			.rundecards-wrapper {
				background-position: start end;
				background-repeat: no-repeat;
				background-size: contain;
				position: relative;
				width: 100%;
				padding: 4rem 0;
				margin-bottom: 3rem;
			}
			@media (min-width:768px) { 
				.rundecards-wrapper { 
					padding: 6rem 0;
					margin-bottom: 4rem;
				} 
			}
			@media (min-width:1024px) { 
				.rundecards-wrapper { 
					padding: 8rem 0;
					margin-bottom: 5rem;
				} 
			}

			.rundecards-section { 
				background-color: var(--color-blaa);
				overflow: visible;
				padding: 2rem 0;
				box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
			}

			.rundecards-title {
				letter-spacing: 2px;
				color: var(--color-blaa);
				position: absolute;
				left: 1.5rem;
				top: -1.7rem;
				z-index: 40;
				white-space: nowrap;
				display: inline-block;
				max-width: calc(100vw - 2rem);
				font-size: clamp(1.25rem, 6.5vw, 2rem);
			}
			@media (min-width:768px) { 
				.rundecards-title { 
					left: 3rem;
					top: -1.7rem; 
				} 
			}
			@media (min-width:1024px) { 
				.rundecards-title { 
					top: -3.6rem; 
					font-size: 4rem; 
				} 
			}

			/* 12-column grid - full viewport width */
			.cards-grid {
				display: grid;
				grid-template-columns: repeat(12, 1fr);
				gap: 0;
				align-items: center;
				width: 100vw;
			}

			/* Popcorn occupies columns 1-2 */
			.popcorn-cell {
				grid-column: 1 / 3;
				display: flex;
				align-items: center;
				justify-content: flex-start;
				position: relative;
				z-index: 10;
			}

			.popcorn-img {
				width: 100%;
				height: auto;
				min-width: 180px;
				max-width: 350px;
			}
			@media (min-width:768px) { 
				.popcorn-img { 
					min-width: 220px;
				} 
			}
			@media (min-width:1024px) { 
				.popcorn-img { 
					min-width: 280px;
				} 
			}

			/* Carousel occupies columns 3-12 */
			.carousel-cell {
				grid-column: 3 / 13;
				position: relative;
			}

			/* Carousel wrapper - no extra margins needed, grid handles full width */
			.carousel-wrapper {
				position: relative;
			}

			/* Scrollable carousel */
			.carousel {
				display: flex;
				gap: 2rem;
				overflow-x: auto;
				scroll-snap-type: x mandatory;
				scroll-behavior: smooth;
				-webkit-overflow-scrolling: touch;
				scrollbar-width: none;
				-ms-overflow-style: none;
				padding: 1rem 2rem 1rem 1rem;
			}

			.carousel::-webkit-scrollbar {
				display: none;
			}

			.carousel-item {
				flex: 0 0 auto;
				scroll-snap-align: center;
			}
		</style>
	</section>
	<main class="container mx-auto p-4">
	</main>
</MainLayout>