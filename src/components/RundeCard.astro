---
const { title = '', img, bg } = Astro.props;
const isLillefinger = title === 'Lillefinger';
const isVitello = title === 'Vitello';
const isPipungerne = title === 'Pipungerne';
const characterType = isLillefinger ? 'lillefinger' : (isVitello ? 'vitello' : (isPipungerne ? 'pipungerne' : ''));
---

<div class="runde-card" role="group" aria-label={title} data-character={characterType}>
  <div class="runde-card__circle">
    <!-- background card image: contains the circular rim and the curved text -->
    <img src={bg} alt="" aria-hidden="true" class="runde-card__bg" />

    <!-- character image placed on top of the card background -->
    <img src={img} alt={title} class="runde-card__img" />
  </div>
</div>

<style>
  .runde-card{ 
    display:inline-flex; 
    align-items:center; 
    justify-content:center;
    cursor: pointer;
  }

  .runde-card__circle{
    --card-size: clamp(180px, 20vw, 360px);
    width: var(--card-size);
    height: var(--card-size);
    position: relative;
    border-radius: 9999px;
    display: block;
    overflow: hidden;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  @media (min-width:768px){ .runde-card__circle{ --card-size: clamp(260px,18vw,420px); } }
  @media (min-width:1024px){ .runde-card__circle{ --card-size: clamp(300px,14vw,520px); } }

  /* Hover effect on card */
  .runde-card:hover .runde-card__circle{
    transform: translateY(-8px);
  }

  /* background card (circle + text) fills the element */
  .runde-card__bg{
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    pointer-events: none;
    transition: transform 0.6s ease-in-out;
  }

  /* Rotate background on hover */
  .runde-card:hover .runde-card__bg{
    transform: rotate(360deg);
  }

  /* character image sits above the background and is centered */
  .runde-card__img{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -48%);
    width: 62%;
    height: auto;
    object-fit: contain;
    display: block;
    transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  /* Character bounces up on hover */
  .runde-card:hover .runde-card__img{
    transform: translate(-50%, -48%) scale(1.25);
  }

  /* Lillefinger scales less because it's already larger */
  .runde-card[data-character="lillefinger"]:hover .runde-card__img{
    transform: translate(-50%, -48%) scale(1.15);
  }

  /* Vitello and Pipungerne are larger from the start */
  .runde-card[data-character="vitello"] .runde-card__img,
  .runde-card[data-character="pipungerne"] .runde-card__img{
    width: 75%;
  }

  .runde-card[data-character="vitello"]:hover .runde-card__img,
  .runde-card[data-character="pipungerne"]:hover .runde-card__img{
    transform: translate(-50%, -48%) scale(1.15);
  }

  /* tweak sizes responsively so character sits nicely inside the rim */
  @media (min-width:768px){ 
    .runde-card__img{ width: 58%; }
    .runde-card[data-character="vitello"] .runde-card__img,
    .runde-card[data-character="pipungerne"] .runde-card__img{ width: 72%; }
  }
  @media (min-width:1024px){ 
    .runde-card__img{ width: 54%; }
    .runde-card[data-character="vitello"] .runde-card__img,
    .runde-card[data-character="pipungerne"] .runde-card__img{ width: 68%; }
  }
</style>

